!function(){"use strict";var a=function(){var a={};return a.getArgumentNames=function(a){for(var b=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,c=/,/,d=/^\s*(_?)(.+?)\1\s*$/,e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,f=[],g=a.toString().replace(e,""),h=g.match(b)[1].split(c),i=function(a,b,c){f.push(c)},j=0;j<h.length;j++)h[j].replace(d,i);return f},a.getArgumentsObject=function(b,c){for(var d={},e=a.getArgumentNames(b),f=0;f<e.length;f++)d[e[f]]=c[f];return d},a.renderTemplate=function(a,b){return a.replace(/\${([^}]+)}/g,function(a,c){return b[c]||""})},a.createErrorCheckingCallback=function(a,b){return a="function"==typeof a?a:function(){},function(c,d){c?a(c):b(d,a)}},a}(),b=function(b){b=b||{};var c=b.windowScope=b.windowScope||{};this._sendGetRequestWithXmlHttp=function(a,b){var c;try{c=new XMLHttpRequest}catch(d){}return c?(c.open("GET",a,!0),c.onreadystatechange=function(){return 4==c.readyState?200!=c.status&&304!=c.status?(b(new Error('Error while loading "'+a+'"; HTTP error '+c.status)),void 0):(b(null,c.responseText),void 0):void 0},4!=c.readyState&&c.send(),void 0):(b(new Error("Could not create XHR object")),void 0)},this._sendGetRequestWithXdr=function(a,b){var d=new c.XDomainRequest;d.onload=function(){b(null,d.responseText)},d.onerror=function(){b(new Error('Error while loading "'+a+'" with XDR; See console messages for details'))},d.ontimeout=function(){b(new Error('Timeout error while loading "'+a+'" with XDR'))},d.open("get",a),d.send()},this._sendGetRequestWithJsonp=function(a,b){b="function"==typeof b&&b;var c=this._getUrlForJSonp(a,b),d=function(a){a&&b&&b(a)},e=this._createScriptElement(c,d),f=this._getScriptContainer();f.appendChild(e)},this._getScriptContainer=function(){var a=b.document,c=a.getElementsByTagName("head");return c?c[0]:a.documentElement};var d=function(a,b){return!a||Event&&a instanceof Event?new Error("There was an error loading a script from "+b+" \n Error: "+(a||"")):a};this._createScriptElement=function(a,b){var c=document.createElement("script");return c.type="text/javascript",c.src=a,"function"==typeof b&&(c.onload=c.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c.onload=c.onreadystatechange=null,b(null,c))},c.onerror=function(c){c=d(c,a),b(c)}),c},this.loadScript=function(b,c){var d=this._getScriptContainer(),e=a.createErrorCheckingCallback(c,function(a,b){d&&a.parentNode&&d.removeChild(a),b(null,a)}),f=this._createScriptElement(b,e);d.appendChild(f)},this.loadScriptsSequentially=function(b,c){var d=b.shift();if(d){var e=this;this.loadScript(d,a.createErrorCheckingCallback(c,function(){e.loadScriptsSequentially(b,c)}))}else"function"==typeof c&&c()},this._getUrlForJSonp=function(a,b){c.jsonpCallbacks=c.jsonpCallbacks||{};var d="BSL"+Math.random().toString(36).substring(2,7);return c.jsonpCallbacks[d]=function(a){b(null,a);try{delete c[d]}catch(e){c[d]=void 0}},a+"?jsonp=jsonpCallbacks."+d},this._isStaticUrl=function(a){return"string"==typeof a&&-1!==a.indexOf("static.")};var e=this._ensureObject=function(a){return"string"==typeof a?JSON.parse(a):a};this._getSendFunc=function(a){return this._isStaticUrl(a)?this._sendGetRequestWithJsonp:"withCredentials"in new c.XMLHttpRequest?this._sendGetRequestWithXmlHttp:"undefined"!=typeof c.XDomainRequest?this._sendGetRequestWithXdr:void 0},this.loadJson=function(b,c){var d=a.createErrorCheckingCallback(c,function(a,b){a=e(a),b(null,a)}),f=this._getSendFunc(b);f?f.call(this,b,d):c(new Error("Could not determine which method to use for HTTP Get with CORS support, your browser is probably not supported"))}},c=function(a){var b=this;b._cachedResult=null,b._cachedError=null,b._pendingCallbacks=[],b._callCallbacks=function(){for(var a;a=b._pendingCallbacks.shift();)try{a(b._cachedError,b._cachedResult)}catch(c){}},b._callbackForGetRequest=function(a,c){if(a)b._cachedError=a;else try{b._cachedResult=b._extractResponse(c)}catch(d){b._cachedError=d}b._callCallbacks()},b.load=function(c){if(b._cachedResult||b._cachedError)c(b._cachedError,b._cachedResult);else{var d=b._pendingCallbacks.push(c);1===d&&a.ajaxClient.loadJson(a.url,b._callbackForGetRequest)}},b._extractResponse=function(a){return a}},d=function(a){c.apply(this,arguments),this._extractResponse=function(b){var c=b;if(!c||"object"!=typeof c)throw new Error("Invalid response when loading client artifact versions from url "+a.url+"\n"+JSON.stringify(b,null,4));return c}},e=function(){c.apply(this,arguments)},f=function(b){var c=function(c,d,e,f){var g={artifactName:e,artifactVersion:f,urlPathPrefix:d};return a.renderTemplate(b.urlTemplates[c],g)},d=function(a,b,d){return c("statics",a,b,d)},e=function(a,b){return c("local",a,b)},f=function(a,b){return c("snapshot",null,a,b)},g=function(a,b,c,d){var e=c[a];if(!e&&!d)throw new Error('Could not find "'+a+'" in '+b+":\n"+JSON.stringify(c,null,4));return e},h=function(b,c,d,e){b.load(a.createErrorCheckingCallback(e,function(a,b){var e,f;try{e=c(a)}catch(g){f=g}b(f,d,e)}))},i=function(a,c,d){var e=function(b){var c=g(a,"latest client snapshots map",b);return f(a,c)};return h(b.snapshotVersionsLoader,e,a,d)},j=function(a,c,d,e){var f=function(b){var e=g(a,"published client artifacts map",b,d);return c(e)};return h(b.clientArtifactVersionsLoader,f,a,e)},k=function(a,b,c){var e=function(c){var e=c[b];if(!e)throw new Error('Could not find property "'+b+'" in client artifact "'+a+'":\n'+JSON.stringify(c,null,4));var f=c.urlPathPrefix;return d(f,a,e)};return j(a,e,!1,c)},l=function(a,b,c,d){var e=function(d){var e=d&&d.urlPathPrefix;return a(e,b,c)};j(b,e,!0,d)},m=function(a,b,c){return l(e,a,null,c)},n=function(a,b,c){return l(d,a,b,c)},o=[{match:/^local$/i,resolve:m},{match:/^\d{1,4}\.\d{1,4}\.\d{1,4}$/,resolve:n},{match:/^snapshot$/i,resolve:i},{match:/^(rc)|(ga)$/i,resolve:k}];this._findMatchingResolver=function(a){for(var b,c=0;c<o.length;c++)if(b=o[c],b.match.test(a))return b.resolve},this._resolveSingleNameValue=function(a,b,c){var d=this._findMatchingResolver(b);d?d(a,b,c):c(null,a,b)},this._getKeys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},this._expandHtmlClientArtifactNames=function(a){var b=a["html-client"];b&&(delete a["html-client"],a.bootstrap=a.core=a.web=a.skins=b)},this.resolve=function(a,b){function c(a,c,f){if(!e){if(a)return e=!0,b&&b(a),void 0;d[c]=f,g--,0===g&&b&&b(null,d)}}b="function"==typeof b&&b,this._expandHtmlClientArtifactNames(a);var d={},e=!1,f=this._getKeys(a),g=f.length;if(0===g&&b)return b(null,a),void 0;for(var h,i=0;i<f.length;i++)h=f[i],this._resolveSingleNameValue(h,a[h],c)}},g=function(b){b=b||{};var c=b.windowScope=b.windowScope||{};this._getQueryParamsFromUrl=function(a){a=a||b.queryString||"",a=a.replace(/^\?/,"").replace(/\++/," ");for(var c,d,e={},f=/[?&]?([^=&]+)(?:=([^&]*))?/g;c=f.exec(a);)d=c[2],d=void 0===d?!0:decodeURIComponent(d),e[decodeURIComponent(c[1])]=d;return e};var d=b.queryParams||this._getQueryParamsFromUrl();this._getRunningExperiments=function(){var a=c.editorModel||c.rendererModel||{};return a.runningExperiments||{}},this._getStatemapFromRunningExperiments=function(){var a=this._getRunningExperiments(),b=a.htmlEditorUseGivenStatemap||a.htmlRendererUseGivenStatemap;return"default"!==b?b:void 0},this._getStatemapUrlFromName=function(a){return"http://static.wix.com/statemap/"+a.replace(/\./g,"")+".json"},this._getStatemapParamValue=function(){return d.statemap||this._getStatemapFromRunningExperiments()},this._getInlineTopology=function(a){for(var b,c=/\s*([^:\s/]+)\s*:\s*([^,\s/]+)\s*(?:,+|$)/g,d={},e=!1;(b=c.exec(a))&&(e||0===b.index);)e=!0,d[b[1]]=b[2];return e&&d},this._getTopologyUrl=function(){return d.topology_url},this._loadStatemapFromUrl=function(c,d){var e=a.createErrorCheckingCallback(d,function(c){c=c||{};var e=c.topology||{},f=a.createErrorCheckingCallback(d,function(a,b){c.topology=a,b(null,c)});b.topologyResolver.resolve(e,f)});b.ajaxClient.loadJson(c,e)},this._loadTopologyFromUrl=function(c,d){var e=a.createErrorCheckingCallback(d,b.topologyResolver.resolve);b.ajaxClient.loadJson(c,e)},this.loadStatemapOrTopology=function(a){var c,d,e;(e=this._getStatemapParamValue())?(d=this._getInlineTopology(e),d?b.topologyResolver.resolve(d,a):(c=this._getStatemapUrlFromName(e),this._loadStatemapFromUrl(c,a))):(c=this._getTopologyUrl())?this._loadTopologyFromUrl(c,a):a(null,{})}},h=function(b){b=b||{};var c=b.ajaxClient;this._throwArtifactNotFound=function(a,b){throw new Error('Location "'+a+'" specified in the scriptsMap does not exist in the specified statemap, topology or the default scriptsLocationMap. arguments: '+JSON.stringify(b,null,4))},this._overrideScriptsMap=function(b,c,d){b=b||{},c=c||{},d=d||{};var e=[];for(var f in b)if(b.hasOwnProperty(f)){var g=d[f]||c[f];if(!g){var h=a.getArgumentsObject(this._overrideScriptsMap,arguments);this._throwArtifactNotFound(f,h)}var i=this._appendToUrlPath(g,b[f]);e.push(i)}return e},this._appendToUrlPath=function(a,b){return this._removeRedundantSlashes(a+"/"+b)},this._removeRedundantSlashes=function(a){return a.replace(/(https?:)?\/\/+/g,function(a,b,c){return b||0===c?a:"/"})},this.loadScripts=function(a,b,d,e){d=d||{};var f=d.topology||d,g=this._overrideScriptsMap(a,b,f);c.loadScriptsSequentially(g,function(a){e(a,g)})}};window.W&&window.W.isUnitTestMode&&(window.WT=window.WT||{},window.WT.utils=a,window.WT.BasicAjaxClientClass=b,window.WT.StatemapOrTopologyLoaderClass=g,window.WT.ScriptMapLoaderClass=h,window.WT.PublishedClientArtifactVersionsLoaderClass=d,window.WT.SnapshotVersionsLoaderClass=e,window.WT.TopologyResolverClass=f),window.loadInitialScriptsDynamically=function(a,c){var i=new b({windowScope:window,document:document}),j=new d({ajaxClient:i,url:"http://s3.amazonaws.com/wix-client-versions/versions.json"}),k=new e({ajaxClient:i,url:"http://static.snapshots.wixpress.com/services/versions.json"}),l=new f({clientArtifactVersionsLoader:j,snapshotVersionsLoader:k,urlTemplates:{statics:"http://static.wix.com/services/${urlPathPrefix}${artifactName}/${artifactVersion}",snapshot:"http://static.snapshots.wixpress.com/services/${artifactName}/${artifactVersion}",local:"http://localhost/${urlPathPrefix}${artifactName}"}}),m=new g({windowScope:window,queryString:window.location.search,ajaxClient:i,topologyResolver:l}),n=function(a,b){if(a){var c=window.console;throw c&&c.error&&(c.error("loadInitialScriptsDynamically: error "+b),c.error(a)),a}},o=function(a,b){n(a,"loading scripts: "+b);var c=window.console;c&&c.info("loadInitialScriptsDynamically completed successfully")},p=function(b,d){n(b,"loading statemap or topology"),window.W=window.W||{},window.W.statemapOrTopology=d,"function"==typeof c&&c(d);var e=new h({ajaxClient:i}),f=(window.serviceTopology||{}).scriptsLocationMap;e.loadScripts(a,f,d,o)};m.loadStatemapOrTopology(p)}}();