define.experiment.newComponent("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton.BackToTopButton",function(a,b){var c=a;c.inherits("mobile.core.components.base.BaseComponent"),c.resources(["W.Commands","W.Config"]),c.binds(["_onWindowScroll","_onClick","_handleWindowResize","_handleMobileRotation","_onSiteReady"]),c.skinParts({bg:{type:"htmlElement"}}),c.fields({EDITOR_META_DATA:{general:{settings:!1,design:!1},mobile:{isTextScalable:!1,allInputsHidden:!0}}}),c.methods({_collapsed:!1,initialize:function(a,b,c){this.parent(a,b,c),window.addEvent(Constants.CoreEvents.RESIZE,this._handleWindowResize),window.addEvent("orientationchange",this._handleMobileRotation),this.injects().Viewer.addEvent("SiteReady",this._onSiteReady),this.injects().Commands.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this._onEditModeChanged)},_handleWindowResize:function(){clearTimeout(this._handleWindowResizeTO),this._handleWindowResizeTO=setTimeout(function(){this._updateButtonPosition()}.bind(this),100)},_handleMobileRotation:function(){this._handleWindowResize()},_fixZoom:function(){this.resources.W.Config.env.isPublicViewer()&&(this.$view.style.zoom=1/this.resources.W.Config.mobileConfig.getZoom().toFixed(2))},_onSiteReady:function(){this.injects().Viewer.removeEvent("SiteReady",this._onSiteReady),this._handleWindowResize()},_onEditModeChanged:function(){this.getSkinPart("bg").setStyle("opacity","0.01"),this.$view.setCollapsed(!(this.resources.W.Config.env.isPublicViewer()||this.resources.W.Config.env.isEditorInPreviewMode()))},_updateButtonPosition:function(){this._fixZoom();var a=this.injects().Viewer.getSiteNode(),b=a.getPosition(),c=b.x+a.getWidth();this.resources.W.Config.env.isPublicViewer()&&(c*=this.resources.W.Config.mobileConfig.getZoom().toFixed(2)),this.$view&&this.$view.setStyle("left",c+"px")},initComponentLayout:function(){this.parent(),this.$view.setStyle("position","fixed")},_onEnabled:function(){var a=this.getSkinPart("bg");a.setStyle("opacity","0.01"),this.$view.addEvent(Constants.CoreEvents.CLICK,this._onClick),window.addEvent(Constants.CoreEvents.SCROLL,this._onWindowScroll),this._handleWindowResize(),this._onWindowScroll(null)},_onDisabled:function(){this.$view.removeEvent(Constants.CoreEvents.CLICK,this._onClick)},_onWindowScroll:function(){var a=window.getScrollTop()<100;a!==this._collapsed&&(this._collapsed=a,this._animateOpacity(this._collapsed?.01:1))},_animateOpacity:function(a){this._runningFX&&(this._runningFX.stopTimer(),this._runningFX.removeEvent("complete",arguments.callee));var b=this.getSkinPart("bg");this.$view.setCollapsed(!(this.resources.W.Config.env.isPublicViewer()||this.resources.W.Config.env.isEditorInPreviewMode())),this._runningFX=new Fx.Tween(b,{duration:a?800:300}),this._runningFX.addEvent("complete",function(){this._runningFX.removeEvent("complete",arguments.callee),this.$view&&this._collapsed&&this.$view.collapse()}.bind(this)),this._runningFX.start("opacity",a)},_onClick:function(){var a=window.getScrollTop(),b=this;this._animate(800,this._makeEaseInOut(this._easeQuad),function(c){b._updateScroll(a-a*c)})},_updateScroll:function(a){this.resources.W.Config.env.$isEditorViewerFrame?this.resources.W.Commands.executeCommand("WPreviewCommands.resetCustomScrollbar",{height:this.injects().Viewer.getSiteNode().getHeight(),top:a}):window.scrollTo(window.getScrollLeft(),a)},dispose:function(){this.$view.removeEvent(Constants.CoreEvents.CLICK,this._onClick),window.removeEvent(Constants.CoreEvents.SCROLL,this._onWindowScroll),window.removeEvent("orientationchange",this._handleMobileRotation),this.parent()},_animate:function(a,b,c){var d=new Date,e=setInterval(function(){var f=new Date-d,g=f/a;g>1&&(g=1);var h=b(g);c(h),1==g&&clearInterval(e)},10)},_easeQuad:function(a){return Math.pow(a,2)},_makeEaseInOut:function(a){return function(b){return.5>b?.5*a(2*b):.5*(2-a(2*(1-b)))}}})}),define.experiment.component("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton.EditorMetaDataRelocation",function(a,b){var c=a,d=b;c.statics({EDITOR_META_DATA:{general:{settings:!1,design:!1},mobile:{isTextScalable:!1,allInputsHidden:!0}}}),c.fields({EDITOR_META_DATA:d.remove()})}),define.skin("wysiwyg.common.components.backtotopbutton.viewer.skins.BackToTopButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"webThemeDir",type:"themeUrl",defaultTheme:"WEB_THEME_DIRECTORY"}]),b.html('<div skinPart="bg"></div>'),b.css(["{ left:0px; float:left; position:relative; bottom:42px; cursor:pointer; }","%bg% { position:absolute; width:46px; height:46px; left:-46px; background-image:url([webThemeDir]backtotop/topButton.png); opacity:1; filter:none; }"])});